
var map;

     var server = "https://geogws003.ad.umd.edu:8443/cjycathy/geog657/final/"; 
    //When the page is loaded, make an AJAX request
     window.onload = function() { 
     

             var result =  [{"bookstore_id":"1","bookstore_name":"1200bookshop (East Tiyu Road)","address":"27th Sports East Road, Guangzhou Tianhe","latitude":"23.129045486","longitude":"113.327873230","opening_hour":"24h","phone_number":"85260827","official_link":"http:\/\/weibo.com\/1200bookshop","img_url":"","introduction":""},{"bookstore_id":"2","bookstore_name":"1200bookshop (North Tianhe)","address":"1\/F, Vauquet Street, No. 460 Tianhe District Tianhe Road","latitude":"23.141262054","longitude":"113.333770752","opening_hour":"24h","phone_number":"85266647","official_link":"http:\/\/weibo.com\/1201bookshop","img_url":"","introduction":""},{"bookstore_id":"3","bookstore_name":"1200bookshop (Citic Plaza)","address":"Shop 3th, Citic Plaza shopping mall, No. No. 233 Hebei Road, Guangzhou  Tianhe District","latitude":"23.142736435","longitude":"113.324310303","opening_hour":"24h","phone_number":"38909737","official_link":"http:\/\/weibo.com\/1202bookshop","img_url":"","introduction":""},{"bookstore_id":"4","bookstore_name":"Unbookshop (Beijing Road)","address":"No. 314 Beijing Road, Guangzhou Yuexiu District","latitude":"23.124847412","longitude":"113.269004822","opening_hour":"Monday to Friday: 10:00-22:00","phone_number":"83306987","official_link":"http:\/\/wo.poco.cn\/newuser\/","img_url":"","introduction":""},{"bookstore_id":"5","bookstore_name":"Unbookstore (Gaode Winter Plaza)","address":"4\/F,L407A, Gaode Winter Plaza, 16th Zhujiang West Road, Guangzhou Tianhe District ","latitude":"23.119987488","longitude":"113.327011108","opening_hour":"Monday to Friday: 10:00-22:00\uff0c Holiday: 10:00-22:31","phone_number":"83306987","official_link":"http:\/\/wo.poco.cn\/newuser\/","img_url":"","introduction":""},{"bookstore_id":"6","bookstore_name":"Sisyphe Bookstore (Wanling Mall)","address":"2\/F, Wanling Mall, No. 230-232 Tianhe Road, Guangzhou Tianhe District","latitude":"23.132829666","longitude":"113.330169678","opening_hour":"10:00\u201422:00","phone_number":"28633152","official_link":"http:\/\/www.sisyphe.com.cn\/","img_url":"","introduction":""},{"bookstore_id":"7","bookstore_name":"Sisyphe Bookstore (CapitaLand Plaza)","address":"No. 18th, 4\/F, CapitaLand Plaza, No. No. 890 Yuncheng West Road, Guangzhou Baiyun ","latitude":"23.181915283","longitude":"113.269393921","opening_hour":"Monday to Thursday & Sunday: 10:00-22:00 Friday & Saturday: 10:00-22:30","phone_number":"36130462","official_link":"http:\/\/www.sisyphe.com.cn\/","img_url":"","introduction":""},{"bookstore_id":"32","bookstore_name":"Pionner","address":"\r\n173 Guangzhou Road, Gulou District, Nanjing","latitude":"32.115699768","longitude":"118.910202026","opening_hour":"10:00-22:00","phone_number":"02583711455","official_link":"https:\/\/xfsd1996.world.taobao.com\/","img_url":"","introduction":""},{"bookstore_id":"8","bookstore_name":"Xooyo Bookstore (Xingang)","address":"93th Xingang West Road, Guangzhou Haizhu District","latitude":"23.099288940","longitude":"113.296531677","opening_hour":"9:00-22:00","phone_number":"89020951","official_link":"http?\/\/weibo.com\/xooyo\/","img_url":"","introduction":""},{"bookstore_id":"10","bookstore_name":"Xooyo Bookstore (Guangdong Provincial Museum)","address":"No.2rd Zhujiang East Road, 2\/F, Guangdong Provincial Museum,Guangzhou Tianhe District","latitude":"23.114740372","longitude":"113.326499939","opening_hour":"Tuesday to Sunday: 9:00-17:00","phone_number":"38046824","official_link":"http?\/\/weibo.com\/xooyo","img_url":"","introduction":""},{"bookstore_id":"11","bookstore_name":"Xooyo Bookstore (Times Art Museum)","address":"1\/F, Baiyun Avenue, North Huangbian Road, Times Art Museum,Guangzhou Baiyun District ","latitude":"23.222295761","longitude":"113.286506653","opening_hour":"","phone_number":"","official_link":"http?\/\/weibo.com\/xooyo","img_url":"","introduction":""},{"bookstore_id":"12","bookstore_name":"Xooyo Bookstore (289 Art Park)","address":"Shop 101, 289 Art Park, Southern newspaper, no. No. 289 Guangzhou Avenue, Guangzhou Yuexiu District","latitude":"23.122980118","longitude":"113.314544678","opening_hour":"11:30-21:00","phone_number":"15625095591","official_link":"http?\/\/weibo.com\/xooyo","img_url":"","introduction":""},{"bookstore_id":"13","bookstore_name":"Fangsuo Commune","address":"MU36, B1 floor, Taikoo Hui, no. No. 383 Tianhe Road, Guangzhou Tianhe District","latitude":"23.133787155","longitude":"113.333061218","opening_hour":"10:00-22:00","phone_number":"38682461","official_link":"http:\/\/weibo.com\/fangsuocommune","img_url":"","introduction":""},{"bookstore_id":"14","bookstore_name":"Cantonbon","address":"3\/F, 7th Chang Hing Street, Guangzhou Yuexiu District","latitude":"23.126081467","longitude":"113.268325806","opening_hour":"9:30-17:30","phone_number":"83340575","official_link":"http:\/\/weibo.com\/cantonbon","img_url":"","introduction":""},{"bookstore_id":"15","bookstore_name":"Tangning Bookstore (Guangyue Plaza)","address":"No. 52-56, Guangyue Plaza, Sea Breeze Road, Guangzhou Tianhe District","latitude":"23.115215302","longitude":"113.339019775","opening_hour":"10:00-22:00","phone_number":"38620812","official_link":"http:\/\/weibo.com\/tangningbookstore","img_url":"","introduction":""},{"bookstore_id":"16","bookstore_name":"360  Bookstore ","address":"F13, Red brick factory Creative Park, Guangzhou Tianhe District ","latitude":"23.112407684","longitude":"113.369270325","opening_hour":"","phone_number":"","official_link":"","img_url":"","introduction":""},{"bookstore_id":"17","bookstore_name":"Hetian Bookstore","address":"Building 11-1102, Dongfang Oriental Creative Garden, No. 313 Industrial Avenue, Guangzhou Haizhu District ","latitude":"23.077743530","longitude":"113.270851135","opening_hour":"Tuesday to Sunday: 9:30-21:30","phone_number":"34329221","official_link":"http:\/\/weibo.com\/hetianshufang","img_url":"","introduction":""},{"bookstore_id":"18","bookstore_name":"Red Bookstore ","address":"Shop 122, 1\/F, Xin ' an building, No. No. 229 Jiangnan Avenue Central, Guangzhou Haizhu District","latitude":"23.093906403","longitude":"113.276008606","opening_hour":"Monday to Friday: 15:30-21:30\uff0cSaturday & Sunday: 15:00-21:30","phone_number":"13808822347","official_link":"http:\/\/weibo.com\/RedBookShop","img_url":"","introduction":""},{"bookstore_id":"19","bookstore_name":"Haotian Secondhand Bookstore ","address":"No. 4th, Wenming six Lane, Wenming Road, Guangzhou Yuexiu District","latitude":"23.122644424","longitude":"113.270736694","opening_hour":"10:00-18:00","phone_number":"813195262","official_link":"http:\/\/shop.kongfz.com\/290968\/","img_url":"","introduction":""},{"bookstore_id":"20","bookstore_name":"Peter and Cat ","address":"5\/F, No. 225 Beijing Road, Guangzhou Yuexiu District","latitude":"23.120384216","longitude":"113.269226074","opening_hour":"Tuesday to Sunday: 11:00-23:00","phone_number":"8620-83827821","official_link":"http:\/\/weibo.com\/2424309745","img_url":"","introduction":""},{"bookstore_id":"21","bookstore_name":"Isaac Bookstore","address":"4\/F, Lingnan Art Mall, No. 3-5 Zhongshan Three road, Yuexiu District","latitude":"23.126249313","longitude":"113.286293030","opening_hour":"Monday to Saturday: 9:00-20:00\uff0cSunday: 13:00-20:00","phone_number":"83845727","official_link":"","img_url":"","introduction":""},{"bookstore_id":"22","bookstore_name":"June Bookstore","address":"3\/F, Lingnan Art Museum, Zhongshan Three road, Guangzhou Yuexiu District","latitude":"23.133962631","longitude":"113.253761292","opening_hour":"","phone_number":"13060636593","official_link":"http:\/\/t.sina.com.cn\/junesapce","img_url":"","introduction":""},{"bookstore_id":"23","bookstore_name":"Xiaogutang Bookstore ","address":"2\/F, self-made 15th, No. 164th Xingang West Road, Guangzhou Haizhu District","latitude":"23.094552994","longitude":"113.304359436","opening_hour":"10:30-21:30","phone_number":"84188565","official_link":"http:\/\/shop.kongfz.com\/2233\/","img_url":"","introduction":""},{"bookstore_id":"24","bookstore_name":"Qiye Bookstore ","address":"Room 631, Hongfa Building, No. 19-21 Henan Second Road, Guangzhou Tianhe District","latitude":"23.132011414","longitude":"113.331794739","opening_hour":"Monday to Saturday: 10:00--20:00\uff0cSunday: 13:00-19:00","phone_number":"","official_link":"http:\/\/www.qiyebook.cn\/","img_url":"","introduction":""},{"bookstore_id":"25","bookstore_name":"Road of Cloud","address":"No. 27th Zishan Street, 104 Zishan Weiyuan residential area, Guangzhou Haizhu District","latitude":"23.095066071","longitude":"113.268257141","opening_hour":"","phone_number":"84133902","official_link":"http:\/\/weibo.com\/u\/5830431303","img_url":"","introduction":""},{"bookstore_id":"26","bookstore_name":"Fuguang Bookstore","address":"1-17, 98th, Jianji Road, Guangzhou Haizhu District","latitude":"23.099655151","longitude":"113.287658691","opening_hour":"","phone_number":"89030389","official_link":"http:\/\/weibo.com\/u\/5065454378","img_url":"","introduction":""},{"bookstore_id":"27","bookstore_name":"Anti-vulnerability","address":"No. 174th 102, Sports West Hengjie, Guangzhou Tianhe District","latitude":"23.128200531","longitude":"113.326492310","opening_hour":"","phone_number":"18620115366","official_link":"","img_url":"","introduction":""},{"bookstore_id":"28","bookstore_name":"New Page","address":"No. 123th Tianhe Road, -1\/F, Guangzhou Book Purchase Center, Guangzhou Tianhe District","latitude":"23.134622574","longitude":"113.320739746","opening_hour":"","phone_number":"","official_link":"","img_url":"","introduction":""},{"bookstore_id":"29","bookstore_name":"1930bookshop","address":"Shop 101, No. 90th, South Tianhe Road, Guangzhou Tianhe District","latitude":"23.130737305","longitude":"113.325599670","opening_hour":"","phone_number":"","official_link":"","img_url":"","introduction":""},{"bookstore_id":"30","bookstore_name":"1980bookshop","address":"Shop 101, No. 21st, Liuyun second Street, South Tianhe first Road, Guangzhou, Tianhe District","latitude":"23.129728317","longitude":"113.324661255","opening_hour":"","phone_number":"","official_link":"","img_url":"","introduction":""},{"bookstore_id":"31","bookstore_name":"Tangning Bookstore (Wanke Central Park)","address":"2-4\/F, B Zone Jisheng Wanke Central Park, Xintai Road, Panyu District, Guangzhou","latitude":"22.932220459","longitude":"113.385467529","opening_hour":"10:00-22:00","phone_number":"38620812","official_link":"http:\/\/weibo.com\/tangningbookstore","img_url":"","introduction":""},{"bookstore_id":"39","bookstore_name":"MyBookStore","address":"College Park MD","latitude":"39.015399933","longitude":"-76.928497314","opening_hour":"9AM","phone_number":"3011111111","official_link":"mybookstore.com","img_url":"","introduction":""},{"bookstore_id":"38","bookstore_name":"MyBookStore","address":"College Park MD","latitude":"39.015399933","longitude":"-76.928497314","opening_hour":"9AM","phone_number":"3011111111","official_link":"mybookstore.com","img_url":"","introduction":""},{"bookstore_id":"36","bookstore_name":"Pionner (Laomendong)","address":"No. 2, Bianying, Qinhuai District, Nanjing","latitude":"32.017616272","longitude":"118.791755676","opening_hour":"10:00-22:00","phone_number":"02585209010","official_link":"http:\/\/xfsd1996.world.taobao.com\/","img_url":"","introduction":""},{"bookstore_id":"52","bookstore_name":"University Book Center","address":"B&N #370 Stamp Student Union Building #163 College Park, MD 20742","latitude":"39.010791779","longitude":"-76.929344177","opening_hour":"Opens at 12:00 PM","phone_number":"(301) 314-2665","official_link":"https:\/\/www.umcp.bncollege.com","img_url":"","introduction":"University of Maryland bookstore featuring school supplies, including attire & small gifts."},{"bookstore_id":"51","bookstore_name":"Books-A-Million","address":"6118 Greenbelt Rd Greenbelt, MD 20770","latitude":"38.999366760","longitude":"-76.908180237","opening_hour":"until 9:00 PM","phone_number":"(301) 474-0033","official_link":"https:\/\/www.booksamillion.com","img_url":"https:\/\/lh5.googleusercontent.com\/-a1I_OqYM1kE\/W_sRmCBXMhI\/AAAAAAAAAWA\/0_FvSCDhUbQk-_gHhuQlAcGh7x_q5dqUgCLIBGAYYCw\/w544-h306-k-no\/","introduction":"Large chain bookstore stocking a range of titles, plus toys, music & more (most have coffee shops)."},{"bookstore_id":"53","bookstore_name":"BookHolders","address":"5125 Berwyn Rd College Park, MD 20740","latitude":"38.982421875","longitude":"-76.937026978","opening_hour":"12:00 PM","phone_number":"(301) 209-9313","official_link":"https:\/\/www.bookholders.com","img_url":"","introduction":"Outpost where students can buy\/sell\/rent college textbooks, with some branches offering class notes."},{"bookstore_id":"54","bookstore_name":"Big Planet Comics","address":"7315 Baltimore Ave College Park, MD 20740","latitude":"39.980232239","longitude":"-76.937583923","opening_hour":"11:00 AM","phone_number":"(301) 699-0498","official_link":"https:\/\/www.bigplanetcomics.com","img_url":"","introduction":"Unpretentious store offering a wide range of comics & graphic novels, with author signings."},{"bookstore_id":"55","bookstore_name":"BookHolders Landmark Pop-up ","address":"4500 College Ave College Park, MD 20740","latitude":"38.982421875","longitude":"-76.937026978","opening_hour":"","phone_number":"(301) 209-9313","official_link":"https:\/\/www.bookholders.com","img_url":"","introduction":"Outpost where students can buy\/sell\/rent college textbooks, with some branches offering class notes."},{"bookstore_id":"56","bookstore_name":"Solid State Books","address":"600F H St NE Washington, DC 20002","latitude":"38.900348663","longitude":"-76.996780396","opening_hour":"Open until 12:00 AM","phone_number":"(202) 897-4201","official_link":"https:\/\/www.solidstatebooksdc.com","img_url":"","introduction":"Indie neighborhood source for books with a coffee bar serving caffeinated drinks, beer & wine."},{"bookstore_id":"57","bookstore_name":"Carpe Librum Bookstore - Dupont Circle","address":"1220 19th St NW Washington, DC 20036","latitude":"38.906608582","longitude":"-77.043945312","opening_hour":"Opens at 11:00 AM","phone_number":"(202) 347-9841","official_link":"https:\/\/www.turningthepage.org","img_url":"","introduction":""},{"bookstore_id":"58","bookstore_name":"East City Bookshop","address":"645 Pennsylvania Ave SE #100 Washington, DC 20003","latitude":"38.884559631","longitude":"-76.996887207","opening_hour":"Opens at 10:00 AM","phone_number":"(202) 290-1636","official_link":"https:\/\/www.eastcitybookshop.com","img_url":"","introduction":""},{"bookstore_id":"59","bookstore_name":"Capitol Hill Books","address":"657 C St SE Washington, DC 20003","latitude":"38.885917664","longitude":"-76.996559143","opening_hour":"Opens at 9:00 AM","phone_number":"(202) 544-1621","official_link":"https:\/\/www.capitolhillbooks-dc.com","img_url":"","introduction":"Cozy, bilevel shop featuring floor-to-ceiling stacks of secondhand books, including first editions."},{"bookstore_id":"60","bookstore_name":"U.S. Government Publishing Office Bookstore","address":"710 North Capitol St NW Washington, DC 20403","latitude":"38.899284363","longitude":"-77.009292603","opening_hour":"Opens at 9:00 AM","phone_number":"(202) 512-0132","official_link":"https:\/\/www.gpo.gov","img_url":"","introduction":""},{"bookstore_id":"61","bookstore_name":"Kramerbooks & Afterwords Cafe ","address":"1517 Connecticut Ave NW Washington, DC 20036","latitude":"38.910820007","longitude":"-77.043746948","opening_hour":"Open until 3:00 AM","phone_number":"(202) 387-1400","official_link":"https:\/\/www.kramers.com","img_url":"","introduction":"Landmark indie bookstore & cafe with a menu of upscale American fare, wine & draft beer. Open late."}]; 
            //  var locations = JSON.parse(result); 
             initMap();
             Listbookstore(result);
         }
     

     
     
     //A function to retrieve the bookstore records from the server with a JSON object
     function Listbookstore(data) { 
         console.log(data);
         for (var i = 0; i < data.length; i++) { 
     
             var lat = data[i].latitude;
             var lng = data[i].longitude;
             
             var name = data[i].bookstore_name;
             var address = data[i].address;
             var link = data[i].official_link;
             var list = 
                "<ul><li><a href = '" + link + "'> "+name+"</a></li>"
                + "<li>" + address + "</li>"
             var latlng = {
                 lat: parseFloat(lat), 
                 lng: parseFloat(lng)
             };
     
             var marker = new L.Marker(latlng).addTo(map);
             marker.bindPopup(list)
        }
     }
     
     function initMap(){
        var defaultLocation = L.latLng(23.129046,113.327877);
        var baseLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
            attribution:'&copy;<a href="https://www.openstreetmap.org/copyright">OpenstreetMap</a> contributors'
        })
        var mapOption ={
            zoom:16,
            center:defaultLocation,
            layers:[baseLayer],
        };

        // create a map object by L.map()
        map = L.map("mapCanvas",mapOption);
    }
